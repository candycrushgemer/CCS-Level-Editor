<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCGApps | Home</title>
  <link rel="stylesheet" href="ccgemer-home-stylesheet.css">
  <link rel="preconnect" href="https://rsms.me/">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <link rel="shortcut icon" href="icon.png" type="image/x-icon"><!-- Add GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
</head>

<body>
  <top-app-bar>
    <ul>
      <li id="ccgappsLogo" style="font-weight: 800; display: flex; align-items: center; gap: 1px; position: relative;">
        <img src="/LevelEditorWeb/CCGAppsGifLogo.gif" alt="CCGApps" style="width: 20px; height: 20px; border-radius: 50%; transform: scale(1.8); opacity: 0; position: absolute; left: 10px;"> 
        <span class="ccgapps-text" style="margin-left: 5px;">CCGApps</span>
      </li>
    </ul>
    <ul class="top-app-bar-btns">
      <li onclick="window.location.href = '#home'">Home</li>
      <li onclick="window.location.href = '#tools'">Tools</li>
    </ul>
  </top-app-bar>
  <main id="home">
    <main-title>
      <h1 class="normal-title"
        style="margin-top: 100px; text-align: center; font-size: 70px; width: 50%; line-height: 1.5;"><span
          class="highlight blue">Our main goal</span> is to <span class="highlight green">create useful things</span> to
        <span class="highlight yellow">enhance the player experience</span>.</h1>
      <p style="text-align: center; font-size: 20px; width: 50%;">Candy Crush Saga becomes even more exciting and
        engaging when you can create your own custom levels and mods, allowing you to unleash your creativity, challenge
        your friends with unique puzzles, and experience the game in entirely new ways that make it more dynamic and
        entertaining than ever before.</p>
    </main-title>
    <img src="home_assets/intro1.png" style="width: 100%; height: 100%;" draggable="false" alt="">
    <br>
    <main-title contents style="width: 70%; margin: 0 auto;" id="tools">
      <main-title-left>
        <h1 class="normal-title" style="font-size: 50px;">Great tool designed for you</h1>
        <p>Discover our powerful Level Editor that empowers you to craft unique Candy Crush experiences. Design custom
          levels with intuitive tools, share your creations with friends, and seamlessly import them into the game to
          play your personalized puzzles anytime, anywhere</p>
        <button-container>
          <button normal class="open-editor-btn" onclick="window.location.href = 'level-editor/'">Enter now
            <sf-icon>􀄯</sf-icon></button>
          <button outlined class="see-intro" onclick="window.location.href = 'level-editor/'">See the introduction <sf-icon>􀄯</sf-icon></button>
        </button-container>
      </main-title-left>
      <main-title-right>
        <img src="home_assets/intro2.png" style="width: 100%; height: 100%;" draggable="false" alt="">
      </main-title-right>
    </main-title>
    <main-title>
      <h1 class="normal-title"
        style="margin-top: 100px; text-align: center; font-size: 70px; width: 50%; line-height: 1.5;"><span
          class="highlight blue">Discover</span> custom levels from <span class="highlight red">Candy Crush Gemer</span>
        as your <span class="highlight green">reference</span>.</h1>
      <p style="text-align: center;">All levels here are made with Level Editor - the powerful Candy Crush Level Editor
        for designers and players. <br>Subscribe Candy Crush Gemer for more updates and special levels. </p>
      <channel-info class="channel-card" id="channelCard" onclick="window.open('https://youtube.com/@candycrushgemer')">
        Loading...
      </channel-info><br>
      <youtube-video-preview-playlist class="playlist" id="playlistContainer">
        Loading playlist...
      </youtube-video-preview-playlist>
    </main-title>
  </main>
  <footer class="ccgemer-footer">
    <footer-column>
      <p style="font-weight: 800;">CCGApps</p>
      <p>Follow us</p>
      <footer-follow-bar>
        <footer-follow-button class="youtube-btn" onclick="window.open('https://youtube.com/@candycrushgemer')"><img src="youtube.svg" alt=""
            draggable="false"></footer-follow-button>
        <footer-follow-button class="facebook-btn" onclick="window.open('https://www.facebook.com/candycrushgemer/')"><img src="facebook.svg" alt=""
            draggable="false"></footer-follow-button>
      </footer-follow-bar>
      <p>Contact us</p>
      <a href="mailto:contact.ccgccs@gmail.com" class="email-link"><sf-icon
          style="font-size: x-large;">􀍕</sf-icon>contact.ccgccs@gmail.com</a>
    </footer-column>
    <footer-column>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#tools">Tools</a></li>
        <li><a href="#support">Support</a></li>
      </ul>
    </footer-column>
    <footer-column>
      <ul>
        <li><a href="level-editor/documentation.html#legal">Legal</a></li>
        <li><a href="level-editor/documentation.html#legal">Terms of Service</a></li>
        <li><a href="level-editor/documentation.html#legal">Terms of Use</a></li>
      </ul>
    </footer-column>
  </footer>


  <script>
    const API_KEY = 'AIzaSyD0hOfL1MC7VChWG03NCm-zXZMsZmkgYMg';
    const CHANNEL_ID = 'UCT02PeLywRKsBBG3lYQ5cxg';
    const PLAYLIST_ID = 'PLrxi_0VCJYCe9M-h3PW0ekLCKK1u2qzIU';

    // Helper to show a single error message for both channel and playlist
    function showChannelPlaylistError() {
      const channelCard = document.getElementById('channelCard');
      const playlistContainer = document.getElementById('playlistContainer');
      if (channelCard) channelCard.textContent = 'Failed to load channel info or playlist.';
      if (playlistContainer) playlistContainer.textContent = 'Failed to load channel info or playlist.';
    }

    fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${CHANNEL_ID}&key=${API_KEY}`)
      .then(response => response.json())
      .then(data => {
        if (!data.items || !data.items[0]) {
          showChannelPlaylistError();
          return;
        }
        const channel = data.items[0];
        const avatar = channel.snippet.thumbnails.default.url;
        const title = channel.snippet.title;
        const username = channel.snippet.customUrl ? `${channel.snippet.customUrl}` : '';
        const subs = channel.statistics.subscriberCount;

        const html = `
          <channel-info-content class="channel-info" style="display: flex; gap: 15px;">
            <img src="${avatar}" alt="Avatar" draggable="false">
            <channel-info-text>
              <channel-name class="channel-name"><h1>${title}</h1></channel-name>
              <channel-username class="channel-username">${username}</channel-username><br>
              <channel-subscribers-count class="channel-subs">${Number(subs).toLocaleString()} subscribers</channel-subscribers-count>
            </channel-info-text>
          </channel-info-content>
          <sf-icon style="display: none;">􀄯</sf-icon>
        `;

        document.getElementById('channelCard').innerHTML = html;
      })
      .catch(err => {
        console.error('Failed to load channel data', err);
        showChannelPlaylistError();
      });

    // Load playlist videos
    fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=100&playlistId=${PLAYLIST_ID}&key=${API_KEY}`)
      .then(response => response.json())
      .then(data => {
        if (!data.items || !Array.isArray(data.items)) {
          showChannelPlaylistError();
          return;
        }
        const container = document.getElementById('playlistContainer');
        container.innerHTML = '';

        data.items.forEach(item => {
          const videoId = item.snippet.resourceId.videoId;
          const title = item.snippet.title;
          const channelTitle = item.snippet.videoOwnerChannelTitle;
          const thumbnail = item.snippet.thumbnails.medium.url;

          const videoCard = document.createElement('youtube-video');
          videoCard.onclick = () => window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
          videoCard.className = 'video-card';
          videoCard.target = '_blank';
          videoCard.innerHTML = `
              <img src="${thumbnail}" alt="${title}">
              <youtube-video-preview-info class="video-info">
                <video-title class="video-title"><h2>${title}</h2></video-title><br>
                <video-channel class="video-channel">${channelTitle}</video-channel>
              </youtube-video-preview-info>  
            `;

          container.appendChild(videoCard);
        });
      })
      .catch(err => {
        console.error('Error loading playlist', err);
        showChannelPlaylistError();
      });
  </script>
  <script>
    // Initialize GSAP ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    // CCGApps logo hover animation
    const ccgappsLogo = document.getElementById('ccgappsLogo');
    const ccgappsText = ccgappsLogo.querySelector('.ccgapps-text');
    const ccgappsImg = ccgappsLogo.querySelector('img');

    // Set initial state
    gsap.set(ccgappsText, { x: 0 });
    gsap.set(ccgappsImg, { opacity: 0, x: -10 });

    // Create hover animation timeline
    const logoHoverTl = gsap.timeline({ paused: true });
    
    logoHoverTl
      .to(ccgappsText, {
        x: 15,
        duration: 0.3,
        ease: "power2.out"
      })
      .to(ccgappsImg, {
        opacity: 1,
        x: 0,
        duration: 0.3,
        ease: "power2.out"
      }, "-=0.2");

    // Add hover listeners
    ccgappsLogo.addEventListener('mouseenter', () => {
      logoHoverTl.play();
      // Reset gif by reloading it
      ccgappsImg.src = ccgappsImg.src;
    });

    ccgappsLogo.addEventListener('mouseleave', () => {
      logoHoverTl.reverse();
    });
  </script>
</body>

</html>